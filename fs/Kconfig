menu "File System & Integrity"

config MKQNX_UNION
    bool "Use traditional QNX union FS at /"                      
    default y
	help
	  If yes, use the traditional QNX organisation that has the ifs
	  mounted at /. If no, a union free system is created. With no
	  unions, opens are slightly faster as only a single resource manager
	  has to be queried for any path.

choice
	prompt "Compress /system and make it read-only using QCFS"
	default MKQNX_QCFS_NO
	help
	  If not 'no', the system partition is read-only and uses the QNX
	  Compressed Filesystem driver. 'yes': use the lz4hc algorithm.
	  'lz4hc': use the lz4hc algorithm. 'zstd': use the zstd algorithm.

config MKQNX_QCFS_NO
	bool "no"
config MKQNX_QCFS_YES
	bool "yes (lz4hc)"
config MKQNX_QCFS_LZ4HC
	bool "lz4hc"
config MKQNX_QCFS_ZSTD
	bool "zstd"

endchoice

config MKQNX_QTD
	bool "Make /system read-only by wrapping in a QTD container"
	default n
	help
	  If yes, the system partition is read-only and protected by wrapping
	  in a QTD container. This is a good idea for a released system but
	  may be inconvenient in cases where security is not important.

config MKQNX_QTSAFEFS
	bool "Make /system read-only using qtsafefs"
	default n
	help
	  If yes, the system partition is read-only and uses the QNX trusted
	  filesystem for safety driver (qtsafefsd).

choice
	prompt "/data mount option"
	default MKQNX_SECURE_DATA_NO
	help
	  If no, the default, the /data directory allows executables to be
	  run from it. For a secure system, ideally this should not be
	  allowed or at a minimum suid binaries should be disallowed which
	  the options, noexec and nosuid enable (see mount utility for
	  details).

config MKQNX_SECURE_DATA_NO
	bool "no"
config MKQNX_SECURE_DATA_NOSUID
	bool "nosuid"
config MKQNX_SECURE_DATA_NOEXEC
	bool "noexec"
endchoice

config MKQNX_PATHTRUST
	bool "Enable pathtrust"
	default n
	help
	  If set to yes, the pathtrust feature will be enabled. This causes
	  the setuid/setgid bits of binaries to be ignored unless they are on
	  a trusted file system and requires any process that tries to
	  execute a binary or load a shared object from an untrusted file
	  system have the untrusted_exec ability. It also allows the function
	  fchecktrust to distinguish trusted and untrusted files.
	  
	  By default, only the ifs will be trusted. If the --qtd option is
	  set to yes, the system partition will also be trusted.

choice
	prompt "Zoneinfo Source"
	default MKQNX_ZONEINFO_SRC_NONE
	help
	  Select the source for the zoneinfo (timezone) database.

	config MKQNX_ZONEINFO_SRC_NONE
		bool "None"

	config MKQNX_ZONEINFO_SRC_DEFAULT
		bool "Default (recommended)"

	config MKQNX_ZONEINFO_SRC_CUSTOM
		bool "Custom Path"
endchoice

config MKQNX_ZONEINFO_PATH
	string "Custom Zoneinfo Path"
	depends on MKQNX_ZONEINFO_SRC_CUSTOM

config MKQNX_TZ
	string "Timezone"
	default "UTC"
	help
	  The time zone the target is used in. The format is as specified by
	  the POSIX TZ format (e.g.
	  stdoffset[dst[offset][,start[/time],end[/time]]]), and accepts the
	  zoneinfo style as well (e.g. America/Montreal), though in that
	  case, the --zoneinfo option needs to be configured. To configure,
	  for example, Eastern Time, you would use
	  EST5EDT,M3.2.0/2,M11.1.0/2.
	  

endmenu # File System & Integrity
